const container=document.getElementById("carousel");const fullSlides=document.querySelector('.full-slides');let slides=gsap.utils.toArray(".showcase__item");const totalSlides=slides.length;fullSlides.textContent=totalSlides;const slideEase="back.out(1.3)";const slideWidth=33.33;const gapContainer=2;const gapX=(gapContainer/slideWidth)*100;const moveAmountX=90+gapX;const baseOffset=(33.33/slideWidth)*100;const minX=baseOffset-moveAmountX;const maxX=baseOffset+(totalSlides-1)*moveAmountX;let dragStartX=0;let dragging=!1;const dragThreshold=50
slides=[slides.pop(),...slides];slides.forEach((slide,i)=>{gsap.set(slide,{xPercent:baseOffset+(i-1)*moveAmountX})});let isAnimating=!1;function updateSlideScales(){slides.forEach((slide)=>{const isActive=slide._gsap.xPercent===100;gsap.to(slide,{scale:isActive?1:0.8,duration:0.2,ease:"power2.out"});slide=isActive?slide.classList.add('slide-active'):slide.classList.remove('slide-active')});const activeSlide=slides.find(slide=>slide.classList.contains('slide-active'));const currentSlide=document.querySelector('.current-slide');currentSlide.textContent=activeSlide.getAttribute('data-slide')}
function go(dir){if(isAnimating)return;isAnimating=!0;if(dir===1){slides.forEach((slide)=>{const current=slide._gsap.xPercent;let adjusted=current;if(current>=maxX){adjusted-=totalSlides*moveAmountX}
gsap.set(slide,{xPercent:Math.round(adjusted)})});gsap.to(slides,{xPercent:`-=${Math.round(moveAmountX)}`,duration:0.75,ease:"power2.inOut",onComplete:()=>{slides.forEach((slide)=>{const current=slide._gsap.xPercent;let wrapped=current;if(current>=maxX){wrapped-=totalSlides*moveAmountX}else if(current<minX){wrapped+=totalSlides*moveAmountX}
gsap.set(slide,{xPercent:Math.round(wrapped)})});updateSlideScales();isAnimating=!1}})}else if(dir===-1){let wrappingSlide=slides.reduce((prev,curr)=>{return curr._gsap.xPercent>prev._gsap.xPercent?curr:prev},slides[0]);const entranceOffset=40;gsap.set(wrappingSlide,{xPercent:minX-entranceOffset});const tl=gsap.timeline({onComplete:()=>{slides.forEach((slide)=>{const current=slide._gsap.xPercent;let wrapped=current;if(current>=maxX){wrapped-=totalSlides*moveAmountX}else if(current<minX){wrapped+=totalSlides*moveAmountX}
gsap.set(slide,{xPercent:wrapped})});updateSlideScales();isAnimating=!1}});tl.to(slides.filter((s)=>s!==wrappingSlide),{xPercent:`+=${moveAmountX}`,duration:0.85,ease:"power2.inOut"},0).to(wrappingSlide,{xPercent:minX,duration:0.65,ease:"power2.inOut"},0.2)}}
updateSlideScales();document.getElementById("nextBtn").addEventListener("click",()=>go(1));document.getElementById("prevBtn").addEventListener("click",()=>go(-1));container.addEventListener("mousedown",(e)=>{if(isAnimating)return;dragging=!0;dragStartX=e.clientX});container.addEventListener("mousemove",(e)=>{if(!dragging)return});container.addEventListener("mouseup",(e)=>{if(!dragging)return;dragging=!1;const dragDelta=e.clientX-dragStartX;if(dragDelta>dragThreshold){go(-1)}else if(dragDelta<-dragThreshold){go(1)}});container.addEventListener("mouseleave",(e)=>{if(!dragging)return;dragging=!1;const dragDelta=e.clientX-dragStartX;if(dragDelta>dragThreshold){go(-1)}else if(dragDelta<-dragThreshold){go(1)}});const swiperStatistic=new Swiper('.swiper-statistic',{slidesPerView:4,slidesPerGroup:1,loop:!0,cssMode:!0,direction:'horizontal',pagination:{el:'.swiper-pagination',type:'fraction',},clickable:!0,navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev',},breakpoints:{320:{slidesPerView:2,spaceBetween:1,slideToClickedSlide:!0,},540:{slidesPerView:3,spaceBetween:1,slideToClickedSlide:!0,},768:{slidesPerView:4,spaceBetween:1,slideToClickedSlide:!0,}}});const titles=document.querySelectorAll('.title-slide');const texts=document.querySelectorAll('.text-slide');function updateTitle(index){titles.forEach((title,i)=>{if(i===index){title.classList.remove('hide');title.classList.add('show')}else{title.classList.remove('show');title.classList.add('hide')}});texts.forEach((text,i)=>{if(i===index){text.classList.remove('hide');text.classList.add('show');moveShowToFirst()}else{text.classList.remove('show');text.classList.add('hide');moveShowToFirst()}})}
function moveShowToFirst(){const container=document.querySelector('.change-text');const showParagraph=container.querySelector('p.show');if(showParagraph){container.insertBefore(showParagraph,container.firstChild)}}
const swiperQuality=new Swiper('.swiper-quality',{slidesPerView:1,loop:!0,cssMode:!0,direction:'horizontal',pagination:{el:'.swiper-pagination',type:'fraction',},clickable:!0,navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev',},});swiperQuality.on('slideChange',function(){const currentIndex=swiperQuality.realIndex;const previousIndex=(currentIndex===0)?titles.length-1:currentIndex-1;titles[previousIndex].classList.remove('show');titles[previousIndex].classList.add('hide');texts[previousIndex].classList.remove('show');texts[previousIndex].classList.add('hide');updateTitle(currentIndex)});updateTitle(swiperQuality.activeIndex)